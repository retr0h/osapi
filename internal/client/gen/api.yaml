openapi: 3.0.0
info:
  description: |
    OSAPI API documentation.
  version: 1.0.0
  title: OSAPI API server
  name: ping
servers:
  - url: http://127.0.0.1:8080
    description: Mock API (local)
tags:
  - name: Minimal_ping_API_Endpoint_ping_operations
    x-displayName: Ping
    description: Operations related to the ping endpoint
  - name: System_Status_API_system_operations
    x-displayName: System
    description: Operations related to the system status endpoint
paths:
  /ping:
    get:
      summary: Retrieve ping status
      tags:
        - Minimal_ping_API_Endpoint_ping_operations
      responses:
        '200':
          description: ping response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pong'
  /system/status:
    get:
      summary: Retrieve system status
      description: >-
        Get the current status of the system including hostname, uptime, load
        averages, memory, and disk usage.
      tags:
        - System_Status_API_system_operations
      responses:
        '200':
          description: A JSON object containing the system's status information.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemStatus'
        '500':
          description: Error retrieving system status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
components:
  schemas:
    Pong:
      type: object
      required:
        - ping
      properties:
        ping:
          type: string
          example: pong
    SystemStatus:
      type: object
      properties:
        hostname:
          type: string
          description: The hostname of the system.
          example: my-linux-server
        uptime:
          type: string
          description: The uptime of the system.
          example: 0 days, 4 hours, 1 minute
        load_average:
          type: object
          description: The system load averages for 1, 5, and 15 minutes.
          properties:
            1min:
              type: number
              description: Load average for the last 1 minute.
              example: 0.32
            5min:
              type: number
              description: Load average for the last 5 minutes.
              example: 0.28
            15min:
              type: number
              description: Load average for the last 15 minutes.
              example: 0.25
          required:
            - 1min
            - 5min
            - 15min
        memory:
          type: object
          description: Memory usage information.
          properties:
            total:
              type: integer
              description: Total memory in bytes.
              example: 8388608
            used:
              type: integer
              description: Used memory in bytes.
              example: 4194304
            free:
              type: integer
              description: Free memory in bytes.
              example: 2097152
          required:
            - total
            - used
            - free
        disk:
          type: object
          description: Disk usage information.
          properties:
            total:
              type: integer
              description: Total disk space in bytes.
              example: 500000000000
            used:
              type: integer
              description: Used disk space in bytes.
              example: 250000000000
            free:
              type: integer
              description: Free disk space in bytes.
              example: 250000000000
          required:
            - total
            - used
            - free
      required:
        - hostname
        - uptime
        - load_average
        - memory
        - disk
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: A description of the error that occurred.
          example: Failed to retrieve the system status.
        details:
          type: string
          description: >-
            Additional details about the error, specifying which component
            failed.
          example: Failed to retrieve hostname.
        code:
          type: integer
          description: The error code.
          example: 500
      required:
        - error
        - code
x-tagGroups:
  - name: Minimal ping API Endpoint
    tags:
      - Minimal_ping_API_Endpoint_ping_operations
  - name: System Status API
    tags:
      - System_Status_API_system_operations
